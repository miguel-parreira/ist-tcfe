\section{Theoretical Analysis}
\label{sec:analysis}

In this section, the eletrical device shown in Figure~\ref{fig:rc} is analysed
theoretically to predict the output of the Envelope Detector and Voltage Regulator circuits.

\section{Envelope Detector}

The circuit consists of a diode(that receives a sinusoidal signal) and a resistance in parallel with a capacitor. The
voltage source $v_S(t)$ drives its input, and the output voltage $v_3(t)$ is taken from
the capacitor terminals. Using the diode ideal model and the solution for the RC circuit, at $t=0$ the diode is on (its a short circuit) and $v_3(t)=v_S(t)$. When $t=tOFF$ the diode goes off (its an open circuit) and $v_3(t)=-R*i_{C}$.
Noticing that at $tOFF$ $i_{R}=-i_{C}$ then $tOFF = \frac{1}{w} \times \arctan{1*w*R*C}$ and for $t>tOFF$ $v_3(t)= A\times \sin(w\times tOFF)\times \exp{-\frac{t-tOFF}{RC}}$.
The time $tON$ is given by the first intersection between the solution for $t>tON$ and $v_S(t)$.

\begin{figure}[h] \centering
\includegraphics[width=0.5\linewidth]{venvlope.eps}
\caption{Output voltage of the envelope detector(v3) and the voltage regulator(v4 - DC Output)}
\label{fig:vevelope}
\end{figure}
\newpage
\section{Voltage Regulator}
Using the real diode model and applying the Kirchhoff Voltage Law (KVL), a single
equation for the single loop in the circuit can be written as

\begin{equation}
  v_{4}+R\times I_{s} \times \exp{\frac{v_{4}}{19\eta \times v_{T}}-1} - v_{3}=0
  \label{eq:kvl}
\end{equation}

Solving the equation with the Newton Raphsonâ€™s iterative method, we got the DC output (v4). And in the image below, we see the oscillation around the average. Noticing that it is a little bit different from the simulation result, as was expected.

\begin{figure}[h] \centering
\includegraphics[width=0.5\linewidth]{vripple.eps}
\caption{Ripple for the DC output}
\label{fig:vripple}
\end{figure}
